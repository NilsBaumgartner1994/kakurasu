module.exports=function(t){var e={};function n(o){if(e[o])return e[o].exports;var u=e[o]={i:o,l:!1,exports:{}};return t[o].call(u.exports,u,u.exports,n),u.l=!0,u.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var u in t)n.d(o,u,function(e){return t[e]}.bind(null,u));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,t),this.state={},this.state.moveHistory=e.moveHistory||[],this.state.currentMoveIndex=e.currentMoveIndex||null,!this.state.currentMoveIndex&&this.state.moveHistory.length>0&&(this.state.currentMoveIndex=this.state.moveHistory.length-1),e.fields||(e.fields=r.generateLevel()),this.state.fields={};for(var n=Object.keys(e.fields),o=0;o<n.length;o++){var i=n[o],s=e.fields[i];this.state.fields[i]=new a(s)}this._loadFieldMetaInformations()}return o(t,[{key:"getAmountMoves",value:function(){return this.state.moveHistory.length}},{key:"changeActiveStatus",value:function(t,e){var n=this.getField(t,e).isClear()?1:0;return this._setFieldStatus(t,e,n)}},{key:"changeFlagStatus",value:function(t,e){var n=this.getField(t,e).isClear()?2:0;return this._setFieldStatus(t,e,n)}},{key:"_setFieldStatus",value:function(t,e,n){var o={row:t,column:e,status:n};return this._makeMove(o)}},{key:"_makeMove",value:function(t){var e=this._applyMove(t);return e&&this._addMoveToHistory(t),e}},{key:"_addMoveToHistory",value:function(t){this._deleteFutureMoveHistory(),this.state.moveHistory.push(t),this._changeCurrentMoveIndex(1)}},{key:"_deleteFutureMoveHistory",value:function(t){var e=this.state.currentMoveIndex;e&&(this.state.moveHistory=this.state.moveHistory.slice(0,e))}},{key:"_changeCurrentMoveIndex",value:function(t){this.state.currentMoveIndex=this.state.currentMoveIndex+t,this.state.currentMoveIndex<0&&(this.state.currentMoveIndex=null)}},{key:"_applyMove",value:function(t){var e=this.getField(t.row,t.column);return!!e.isEditable()&&(e.setStatus(t.status),!0)}},{key:"getField",value:function(e,n){var o=t._getFieldKey(e,n),u=this.state.fields[o];return u.row=e,u.column=n,u}},{key:"redoMove",value:function(){if(null!==this.state.currentMoveIndex){var t=JSON.parse(JSON.stringify(this.state.moveHistory[this.state.currentMoveIndex+1]));if(t)return this._changeCurrentMoveIndex(1),this._applyMove(t)}return!1}},{key:"undoMove",value:function(){if(null!==this.state.currentMoveIndex){var t=JSON.parse(JSON.stringify(this.state.moveHistory[this.state.currentMoveIndex]));if(t)return t.enabled=!t.enabled,this._changeCurrentMoveIndex(-1),this._applyMove(t)}return!1}},{key:"asJSON",value:function(){var e=t._fieldsAsJSON(this.state.fields),n=JSON.parse(JSON.stringify(this.state));return n.fields=e,n}},{key:"isGameWon",value:function(){var t=this._areAllRowColumnContraintsSatisfied(!0);if(!t)return!1;var e=this._areAllRowColumnContraintsSatisfied(!1);return!!e&&(t&&e)}},{key:"_areAllRowColumnContraintsSatisfied",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._getAmountRowColumns(t),n=0;n<e;n++){var o=this._isRowColumnConstraintSatisfied(!0,n);if(!o)return!1}return!0}},{key:"_getAmountRowColumns",value:function(t){return t?this.getAmountRows():this.getAmountColumns()}},{key:"_isRowColumnConstraintSatisfied",value:function(t,e){return this._getConstraintValue(t,e)===this._getRowColumnSumValue(t,e)}},{key:"_getRowColumnSumValue",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments[1],n=this._getFieldsInRowColumn(t,e),o=0,u=0;u<n.length;u++){var i=n[u],a=this._getWeightForField(t,i);i.isActive()&&(o+=a)}return o}},{key:"_loadFieldMetaInformations",value:function(){this.meta={},this._loadFiledMetaInformationsAmountRowsAndColumns(),this._loadFieldMetaInformationsContraints()}},{key:"_loadFiledMetaInformationsAmountRowsAndColumns",value:function(){for(var t=this.state.fields,e=Object.keys(t),n=null,o=null,u=0;u<e.length;u++){var i=e[u].split("-"),a=parseInt(i[0]),r=parseInt(i[1]);(!o||o<a)&&(o=a),(!n||n<a)&&(n=r)}this.meta.amountRows=null!==n?n+1:0,this.meta.amountColumns=null!==o?o+1:0}},{key:"_loadFieldMetaInformationsContraints",value:function(){this.meta.contraints={},this.meta.contraints[this._getConstraintRowOrColumn(!0)]={},this.meta.contraints[this._getConstraintRowOrColumn(!1)]={},this._loadFieldMetaInformationsConstraintsForRowColumn(!0),this._loadFieldMetaInformationsConstraintsForRowColumn(!1)}},{key:"_loadFieldMetaInformationsConstraintsForRowColumn",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=t?this.getAmountRows():this.getAmountColumns(),n=0;n<e;n++)this._loadFieldMetaInformationsContraintsForFields(t,n)}},{key:"getWeight",value:function(t){return t+1}},{key:"getFieldsInRow",value:function(t){return this._getFieldsInRowColumn(!0,t)}},{key:"getFieldsInColumn",value:function(t){return this._getFieldsInRowColumn(!1,t)}},{key:"_getFieldsInRowColumn",value:function(t,e){for(var n=[],o=this._getAmountRowColumns(t),u=0;u<o;u++){var i=t?e:u,a=t?u:e,r=this.getField(i,a);n.push(r)}return n}},{key:"_getWeightForField",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments[1],n=t?e.column:e.row;return this.getWeight(n)}},{key:"_loadFieldMetaInformationsContraintsForFields",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments[1],n=this._getFieldsInRowColumn(t,e),o=0,u=0;u<n.length;u++){var i=n[u],a=this._getWeightForField(t,i),r=i.isSolution();r&&(o+=a)}var s=this._getConstraintRowOrColumn(t);this.meta.contraints[s][e]=o}},{key:"getConstraintValueForRow",value:function(t){return this._getConstraintValue(!0,t)}},{key:"getConstraintValueForColumn",value:function(t){return this._getConstraintValue(!1,t)}},{key:"_getConstraintValue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments[1],n=this._getConstraintRowOrColumn(t);return this.meta.contraints[n][e]}},{key:"_getConstraintRowOrColumn",value:function(t){return t?"rows":"columns"}},{key:"getAmountRows",value:function(){return this.meta.amountRows}},{key:"getAmountColumns",value:function(){return this.meta.amountColumns}},{key:"getHighestConstraintValue",value:function(){var t=this.getHighestConstraintForColumnRow(!0),e=this.getHighestConstraintForColumnRow(!1);return t>e?t:e}},{key:"getHighestConstraintForColumnRow",value:function(t){for(var e=this._getAmountRowColumns(t),n=null,o=0;o<e;o++){var u=t?this.getConstraintValueForRow(o):this.getConstraintValueForColumn(o);(null===n||n<u)&&(n=u)}return n}},{key:"print",value:function(){for(var t=this.getAmountRows(),e=this.getAmountColumns(),n=t>e?(t+"").length:(e+"").length,o=(this.getHighestConstraintValue()+"").length,u=n>o?n:o,i="".padStart(u," ")+"|",a=0;a<e;a++)i+=(this.getWeight(a)+"").padStart(u," ")+"|";i+="".padStart(u," ")+"\n";for(var r=0;r<t;r++){i+="".padStart(u,"-")+"+";for(var s=0;s<e;s++)i+="".padStart(u,"-")+"+";i+="".padStart(u,"-")+"\n",i+=(this.getWeight(r)+"").padStart(u," ")+"|";for(var l=0;l<e;l++){i+=(this.getField(r,l).isSolution()?"X":"").padStart(u," ")+"|"}i+=(this.getConstraintValueForRow(r)+"").padStart(u," ")+"\n"}i+="".padStart(u,"-")+"+";for(var m=0;m<e;m++)i+="".padStart(u,"-")+"+";i+="".padStart(u,"-")+"\n",i+="".padStart(u," ")+"|";for(var v=0;v<e;v++)i+=(this.getConstraintValueForColumn(v)+"").padStart(u," ")+"|";return i}}],[{key:"_getFieldKey",value:function(t,e){return t+"-"+e}},{key:"_fieldsAsJSON",value:function(t){for(var e={},n=Object.keys(t),o=0;o<n.length;o++){var u=n[o],i=t[u];e[u]=i.asJSON()}return e}}]),t}(),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{status:0};u(this,t),this.state=e}return o(t,[{key:"setStatus",value:function(t){this.state.status=t}},{key:"isClear",value:function(){return 0===this.state.status}},{key:"isActive",value:function(){return 1===this.state.status}},{key:"isFlagged",value:function(){return 2===this.state.status}},{key:"setEditable",value:function(t){this.state.editable=t}},{key:"isEditable",value:function(){return this.state.editable}},{key:"setIsSolution",value:function(t){this.state.solution=t}},{key:"isSolution",value:function(){return this.state.solution}},{key:"getState",value:function(){return this.state}},{key:"asJSON",value:function(){return this.getState()}}]),t}(),r=function(){function t(){u(this,t)}return o(t,null,[{key:"generateLevel",value:function(e){(e=e||{}).rows=e.rows||5,e.columns=e.columns||e.rows,e.difficulty=e.difficulty||"medium",e.amountMinimumInRow=e.amountMinimumInRow||1,e.amountMaximumInRow=e.amountMaximumInRow||e.rows/2,e.amountMinimumInColumn=e.amountMinimumInColumn||1,e.amountMaximumInColumn=e.amountMaximumInColumn||e.columns/2,e.amountMinimumInRow<0&&(e.amountMinimumInRow=0),e.amountMinimumInRow>e.rows&&(e.amountMinimumInRow=e.rows),e.amountMaximumInRow>e.rows&&(e.amountMaximumInRow=e.rows),e.amountMaximumInRow<0&&(e.amountMaximumInRow=0),e.amountMaximumInRow<e.amountMinimumInRow&&(e.amountMaximumInRow=e.amountMinimumInRow),e.amountMinimumInColumn<0&&(e.amountMinimumInColumn=0),e.amountMinimumInColumn>e.columns&&(e.amountMinimumInColumn=e.columns),e.amountMaximumInColumn>e.columns&&(e.amountMaximumInColumn=e.columns),e.amountMaximumInColumn<0&&(e.amountMaximumInColumn=0),e.amountMaximumInColumn<e.amountMinimumInColumn&&(e.amountMaximumInColumn=e.amountMinimumInColumn);var n=t._initEmptyField(e.rows,e.columns);return n=t._setSolutionFieldsForRowColumn(!0,n,e),n=t._setSolutionFieldsForRowColumn(!1,n,e),i._fieldsAsJSON(n)}},{key:"_setSolutionFieldsForRowColumn",value:function(e,n,o){for(var u=e?o.rows:o.columns,a=0;a<u;a++){var r=[];r=e?t._selectRandomAmountIndexes(o.columns,o.amountMinimumInColumn,o.amountMaximumInColumn):t._selectRandomAmountIndexes(o.rows,o.amountMinimumInRow,o.amountMaximumInRow);for(var s=0;s<r.length;s++){var l=r[s],m=e?a:l,v=e?l:a,f=i._getFieldKey(m,v),h=n[f];h.setIsSolution(!0),n[f]=h}}return n}},{key:"_initEmptyField",value:function(t,e){for(var n={},o=0;o<t;o++)for(var u=o,r=0;r<e;r++){var s=r;n[i._getFieldKey(u,s)]=new a}return n}},{key:"_selectRandomAmountIndexes",value:function(e,n,o){for(var u=t._getRandomInt(n,o),i=Array.from(Array(e).keys()),a=t._shuffle(i),r=[],s=0;s<u;s++)r.push(a[s]);return r}},{key:"_getRandomInt",value:function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t}},{key:"_shuffle",value:function(t){var e,n,o;for(o=t.length-1;o>0;o--)e=Math.floor(Math.random()*(o+1)),n=t[o],t[o]=t[e],t[e]=n;return t}}]),t}();t.exports.Kakurasu=i,t.exports.KakurasuField=a,t.exports.KakurasuLevelGenerator=r}]);